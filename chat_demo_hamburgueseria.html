<!DOCTYPE html>
<html lang="es">

<head>
  <meta charset="UTF-8" />
  <title>Chat - Burger House</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />
  <link rel="stylesheet" href="css/chat_hamburgueseria.css">
</head>

<body>

  <div class="chat-container">
    <header class="chat-header">
      <div class="header-left">
        <a href="https://www.helloiagency.com" class="back-btn" aria-label="Volver">
          <svg viewBox="0 0 24 24" width="22" height="22" fill="none" stroke="currentColor" stroke-width="2.5"
            stroke-linecap="round" stroke-linejoin="round">
            <line x1="19" y1="12" x2="5" y2="12"></line>
            <polyline points="12 19 5 12 12 5"></polyline>
          </svg>
        </a>
        <div class="biz-avatar" aria-hidden="true">游꼢</div>
        <div class="chat-header-info">
          <h1>Burger House</h1>
          <p><span class="dot-online"></span><span id="headerStatus"></span></p>
        </div>
      </div>

      <div class="header-right">
        <button class="cart-btn" id="openCartBtn" type="button" aria-label="Abrir cat치logo">
          <img
            src="/Users/nicolasllanos/.gemini/antigravity/brain/37c5e849-0633-4bfe-a81c-de474fe52834/uploaded_media_1770058692701.png"
            class="store-icon" alt="Cat치logo">
          <span class="cart-badge" id="cartCount">0</span>
        </button>
        <div class="badge" id="negocioLabel" style="display:none"></div>
      </div>
    </header>

    <main class="chat-messages" id="chatMessages"></main>

    <!-- Floating Cart Button (Chat View) -->
    <button id="chatFloatingCartBtn" class="chat-floating-cart-btn" style="display:none;" aria-label="Ver carrito"
      onclick="window.openDrawer('cart')">
      <svg viewBox="0 0 24 24" width="24" height="24" fill="white">
        <path
          d="M7 18c-1.1 0-1.99.9-1.99 2S5.9 22 7 22s2-.9 2-2-.9-2-2-2zM1 2v2h2l3.6 7.59-1.35 2.45c-.16.28-.25.61-.25.96 0 1.1.9 2 2 2h12v-2H7.42c-.14 0-.25-.11-.25-.25l.03-.12.9-1.63h7.45c.75 0 1.41-.41 1.75-1.03l3.58-6.49c.08-.14.12-.31.12-.48 0-.55-.45-1-1-1H5.21l-.94-2H1zm16 16c-1.1 0-1.99.9-1.99 2s.89 2 1.99 2 2-.9 2-2-.9-2-2-2z">
        </path>
      </svg>
      <span id="chatFloatingCartCount" class="floating-badge">0</span>
    </button>

    <footer class="chat-footer">
      <div class="footer-row">
        <!-- Add Button (+) -->
        <button class="footer-btn" type="button" aria-label="Adjuntar">
          <svg viewBox="0 0 24 24">
            <path d="M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"></path>
          </svg>
        </button>

        <form id="chatForm" class="chat-form" style="flex:1;">
          <div class="input-wrapper">
            <input id="chatInput" class="chat-input" type="text" placeholder="" autocomplete="off" required />
            <!-- Sticker Icon (Inside right) -->
            <button class="sticker-btn" type="button" aria-label="Stickers">
              <svg viewBox="0 0 24 24">
                <path
                  d="M19.002 6.637v9.424c0 1.636-1.328 2.964-2.964 2.964H7.962c-1.636 0-2.964-1.328-2.964-2.964V7.962c0-1.636 1.328-2.964 2.964-2.964h7.616c.148 0 .292.012.424.032v1.608a1.325 1.325 0 0 0 1.324 1.325h1.608c.02-.132.032-.276.032-.424l.036-.902zm-1.896.228a.196.196 0 0 1-.036.036 3.111 3.111 0 0 0-2.072 2.072c-.012.012-.024.024-.036.036l2.144-2.144zM7.962 3.5c-2.46 0-4.464 2.004-4.464 4.464v10.1c0 2.46 2.004 4.464 4.464 4.464h8.076c2.46 0 4.464-2.004 4.464-4.464v-8.076l-4.226-6.488H7.962z"
                  fill-rule="evenodd"></path>
              </svg>
            </button>
          </div>
        </form>

        <!-- Camera Button -->
        <button class="footer-btn" type="button" aria-label="C치mara">
          <svg viewBox="0 0 24 24">
            <path
              d="M11.8 13.9c1.7 0 3.1-1.4 3.1-3.1s-1.4-3.1-3.1-3.1-3.1 1.4-3.1 3.1 1.4 3.1 3.1 3.1zm0-4.7c.9 0 1.6.7 1.6 1.6s-.7 1.6-1.6 1.6-1.6-.7-1.6-1.6.7-1.6 1.6-1.6zM21.2 5h-4.3l-.3-.9c-.3-.9-.6-1.1-1.6-1.1H8.6c-1 0-1.3.2-1.6 1.1l-.2.9H2.5c-.8 0-1.4.6-1.4 1.4v13.7c0 .8.6 1.4 1.4 1.4h18.7c.8 0 1.4-.6 1.4-1.4V6.4c0-.8-.6-1.4-1.4-1.4z"
              fill-rule="evenodd"></path>
          </svg>
        </button>

        <!-- Mic Button (Turns to Send) -->
        <button id="sendButton" class="send-mic-btn" type="button" aria-label="Enviar">
          <!-- Default Mic Icon -->
          <svg viewBox="0 0 24 24" class="mic-icon">
            <path
              d="M11.999 14.942c2.001 0 3.531-1.53 3.531-3.531V4.35c0-2.001-1.53-3.531-3.531-3.531S8.469 2.35 8.469 4.35v7.061c0 2.001 1.53 3.531 3.53 3.531zm4.338-3.531H15.63c-.36 3.016-2.912 5.258-5.95 5.258-3.037 0-5.59-2.242-5.95-5.258H3.023c.382 4.14 3.652 7.425 7.794 7.828v2.76h2.365v-2.76c4.142-.403 7.412-3.688 7.794-7.828z">
            </path>
          </svg>
        </button>
      </div>

      <div class="status-line" style="display:none">
        <span id="statusText"></span>
        <div style="font-size: 9px; opacity: 0.5; margin-top:2px; display:none" id="userIdLabel"></div>
      </div>
    </footer>

    <!-- Drawer (Catalog / Cart Screen) -->
    <div class="drawer" id="drawer">
      <div class="drawer-panel" role="dialog" aria-modal="true" aria-label="Pantalla de Cat치logo">
        <header class="drawer-header">
          <div class="left-actions">
            <button class="drawer-close" id="drawerClose" type="button">Cancelar</button>
          </div>
          <div id="drawerTitle">Cat치logo</div>
          <div class="right-actions">
            <button class="cart-btn" id="drawerCartBtn" type="button" style="font-size:22px">游</button>
          </div>
        </header>

        <div class="drawer-body">
          <!-- Business Info (Only shown in catalog mode) -->
          <div id="businessInfo" style="display:none">
            <div class="biz-banner">
              <img
                src="/Users/nicolasllanos/.gemini/antigravity/brain/37c5e849-0633-4bfe-a81c-de474fe52834/burger_house_banner_1770054754913.png"
                alt="Burger House Banner">
            </div>
            <div class="biz-details">
              <h2>Burger House</h2>
              <p>Las mejores hamburguesas gourmet de la ciudad, elaboradas con ingredientes frescos y carne de primera
                calidad.</p>
              <p style="margin-top:8px"><span style="color:var(--wa-header)">游늸</span> Microcentro, Buenos Aires</p>
            </div>
          </div>

          <!-- Dynamic content -->
          <div id="drawerBody"></div>
        </div>

        <!-- Sticky Bottom Cart Button (Catalog Mode Only) -->
        <button id="floatingCartBtn" class="floating-cart-btn" type="button">
          Ver carrito (<span id="floatingCartCount">0</span>)
        </button>

        <!-- Cart Footer (Cart Mode Only) -->
        <div class="drawer-footer" id="drawerFooter" style="display:none;">
          <div class="summary-container">
            <div class="summary-row total">
              <span>Total estimado</span>
              <span id="cartTotalLabel">US$ 0.00</span>
            </div>
          </div>
          <button class="primary-btn" id="sendOrderBtn" type="button">Realizar pedido</button>
          <div class="disclaimer">Los precios pueden variar seg칰n el local.</div>
        </div>
      </div>
    </div>

  </div>

  <script src="js/chat_hamburgueseria.js"></script>
</body>

</html>