<!DOCTYPE html>
<html lang="es">

<head>
  <meta charset="UTF-8" />
  <title>Chat - Burger House</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />
  <link rel="stylesheet" href="css/chat_hamburgueseria.css?v=2">
</head>

<body>

  <div class="chat-container">
    <header class="chat-header">
      <div class="header-left">

        <div class="biz-avatar" aria-hidden="true">游꼢</div>
        <div class="chat-header-info">
          <h1>Burger House</h1>
          <p><span class="dot-online"></span><span id="headerStatus"></span></p>
        </div>
      </div>

      <div class="header-right">
        <button class="cart-btn" id="openCartBtn" type="button" aria-label="Abrir cat치logo">
          <svg xmlns="http://www.w3.org/2000/svg" class="store-icon" viewBox="0 0 256 256" fill="currentColor">
            <g transform="translate(1.4065934065934016 1.4065934065934016) scale(2.81 2.81)">
              <path
                d="M 70.877 82.59 h -18.55 c -0.553 0 -1 -0.447 -1 -1 V 52.767 c 0 -4.767 3.878 -8.644 8.644 -8.644 h 3.262 c 4.767 0 8.645 3.877 8.645 8.644 V 81.59 C 71.877 82.143 71.43 82.59 70.877 82.59 z M 53.327 80.59 h 16.55 V 52.767 c 0 -3.663 -2.98 -6.645 -6.645 -6.645 h -3.262 c -3.663 0 -6.644 2.981 -6.644 6.645 V 80.59 z"
                style="stroke: none; stroke-width: 1; stroke-dasharray: none; stroke-linecap: butt; stroke-linejoin: miter; stroke-miterlimit: 10; fill: currentColor; fill-rule: nonzero; opacity: 1;"
                stroke-linecap="round" />
              <path
                d="M 43.468 71.467 H 19.123 c -0.552 0 -1 -0.447 -1 -1 V 46.121 c 0 -0.552 0.448 -1 1 -1 h 24.345 c 0.552 0 1 0.448 1 1 v 24.346 C 44.468 71.02 44.021 71.467 43.468 71.467 z M 20.123 69.467 h 22.345 V 47.121 H 20.123 V 69.467 z"
                style="stroke: none; stroke-width: 1; stroke-dasharray: none; stroke-linecap: butt; stroke-linejoin: miter; stroke-miterlimit: 10; fill: currentColor; fill-rule: nonzero; opacity: 1;"
                stroke-linecap="round" />
              <path
                d="M 89.991 21.92 c -0.005 -0.115 -0.024 -0.228 -0.068 -0.336 c -0.002 -0.004 -0.002 -0.008 -0.003 -0.012 c -0.037 -0.087 -0.086 -0.169 -0.148 -0.244 L 78.633 7.775 C 78.443 7.544 78.159 7.41 77.86 7.41 H 66.291 H 53.8 H 36.2 h -0.28 H 23.709 H 12.14 c -0.299 0 -0.583 0.134 -0.772 0.365 L 0.228 21.329 c -0.062 0.075 -0.111 0.157 -0.148 0.244 c -0.002 0.004 -0.002 0.009 -0.004 0.014 c -0.043 0.107 -0.062 0.219 -0.067 0.333 C 0.008 21.935 0 21.948 0 21.963 v 2.791 c 0 5.066 3.864 9.247 8.8 9.749 V 81.59 c 0 0.553 0.448 1 1 1 h 70.4 c 0.553 0 1 -0.447 1 -1 V 34.504 c 4.935 -0.503 8.8 -4.683 8.8 -9.749 v -2.791 C 90 21.948 89.992 21.935 89.991 21.92 z M 86.884 20.963 H 72.092 L 67.736 9.41 h 9.651 L 86.884 20.963 z M 70.4 24.754 c 0 4.301 -3.499 7.8 -7.8 7.8 c -4.301 0 -7.8 -3.499 -7.8 -7.8 v -1.791 H 70.4 V 24.754 z M 52.8 24.754 c 0 4.301 -3.499 7.8 -7.8 7.8 s -7.8 -3.499 -7.8 -7.8 v -1.791 h 15.6 V 24.754 z M 34.92 20.963 H 20.046 L 24.401 9.41 H 34.92 V 20.963 z M 19.6 22.963 h 15.6 v 1.791 c 0 4.301 -3.499 7.8 -7.8 7.8 c -4.301 0 -7.8 -3.499 -7.8 -7.8 V 22.963 z M 54.8 9.41 h 10.8 l 4.355 11.553 H 54.8 V 9.41 z M 52.8 20.963 H 37.2 V 9.41 h 15.6 V 20.963 z M 12.612 9.41 h 9.651 l -4.355 11.553 H 3.116 L 12.612 9.41 z M 2 24.754 v -1.791 h 15.6 v 1.791 c 0 4.301 -3.499 7.8 -7.8 7.8 C 5.499 32.554 2 29.055 2 24.754 z M 10.8 80.59 V 34.504 c 3.438 -0.35 6.346 -2.49 7.8 -5.464 c 1.594 3.259 4.934 5.515 8.8 5.515 s 7.206 -2.256 8.8 -5.515 c 1.594 3.259 4.934 5.515 8.8 5.515 c 3.866 0 7.206 -2.256 8.8 -5.515 c 1.594 3.259 4.934 5.515 8.8 5.515 c 3.866 0 7.207 -2.256 8.801 -5.515 c 1.455 2.975 4.362 5.114 7.8 5.464 V 80.59 H 10.8 z M 88 24.754 c 0 4.301 -3.499 7.8 -7.8 7.8 s -7.8 -3.499 -7.8 -7.8 v -1.791 H 88 V 24.754 z"
                style="stroke: none; stroke-width: 1; stroke-dasharray: none; stroke-linecap: butt; stroke-linejoin: miter; stroke-miterlimit: 10; fill: currentColor; fill-rule: nonzero; opacity: 1;"
                stroke-linecap="round" />
            </g>
          </svg>
          <span class="cart-badge" id="cartCount">0</span>
        </button>
        <div class="badge" id="negocioLabel" style="display:none"></div>
      </div>
    </header>

    <main class="chat-messages" id="chatMessages"></main>

    <!-- Floating Cart Button (Chat View) -->
    <button id="chatFloatingCartBtn" class="chat-floating-cart-btn" style="display:none;" aria-label="Ver carrito"
      onclick="window.openDrawer('cart')">
      <svg viewBox="0 0 24 24" width="24" height="24" fill="white">
        <path
          d="M7 18c-1.1 0-1.99.9-1.99 2S5.9 22 7 22s2-.9 2-2-.9-2-2-2zM1 2v2h2l3.6 7.59-1.35 2.45c-.16.28-.25.61-.25.96 0 1.1.9 2 2 2h12v-2H7.42c-.14 0-.25-.11-.25-.25l.03-.12.9-1.63h7.45c.75 0 1.41-.41 1.75-1.03l3.58-6.49c.08-.14.12-.31.12-.48 0-.55-.45-1-1-1H5.21l-.94-2H1zm16 16c-1.1 0-1.99.9-1.99 2s.89 2 1.99 2 2-.9 2-2-.9-2-2-2z">
        </path>
      </svg>
      <span id="chatFloatingCartCount" class="floating-badge">0</span>
    </button>

    <footer class="chat-footer">
      <div class="footer-row">
        <!-- Add Button (+) -->
        <button class="footer-btn" type="button" aria-label="Adjuntar">
          <svg viewBox="0 0 24 24">
            <path d="M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"></path>
          </svg>
        </button>

        <form id="chatForm" class="chat-form" style="flex:1;">
          <div class="input-wrapper">
            <input id="chatInput" class="chat-input" type="text" placeholder="" autocomplete="off" required />
            <!-- Sticker Icon (Inside right) -->
            <button class="sticker-btn" type="button" aria-label="Stickers">
              <svg viewBox="0 0 24 24">
                <path
                  d="M19.002 6.637v9.424c0 1.636-1.328 2.964-2.964 2.964H7.962c-1.636 0-2.964-1.328-2.964-2.964V7.962c0-1.636 1.328-2.964 2.964-2.964h7.616c.148 0 .292.012.424.032v1.608a1.325 1.325 0 0 0 1.324 1.325h1.608c.02-.132.032-.276.032-.424l.036-.902zm-1.896.228a.196.196 0 0 1-.036.036 3.111 3.111 0 0 0-2.072 2.072c-.012.012-.024.024-.036.036l2.144-2.144zM7.962 3.5c-2.46 0-4.464 2.004-4.464 4.464v10.1c0 2.46 2.004 4.464 4.464 4.464h8.076c2.46 0 4.464-2.004 4.464-4.464v-8.076l-4.226-6.488H7.962z"
                  fill-rule="evenodd"></path>
              </svg>
            </button>
          </div>
        </form>

        <!-- Camera Button -->
        <button class="footer-btn" type="button" aria-label="C치mara">
          <svg viewBox="0 0 24 24">
            <path
              d="M11.8 13.9c1.7 0 3.1-1.4 3.1-3.1s-1.4-3.1-3.1-3.1-3.1 1.4-3.1 3.1 1.4 3.1 3.1 3.1zm0-4.7c.9 0 1.6.7 1.6 1.6s-.7 1.6-1.6 1.6-1.6-.7-1.6-1.6.7-1.6 1.6-1.6zM21.2 5h-4.3l-.3-.9c-.3-.9-.6-1.1-1.6-1.1H8.6c-1 0-1.3.2-1.6 1.1l-.2.9H2.5c-.8 0-1.4.6-1.4 1.4v13.7c0 .8.6 1.4 1.4 1.4h18.7c.8 0 1.4-.6 1.4-1.4V6.4c0-.8-.6-1.4-1.4-1.4z"
              fill-rule="evenodd"></path>
          </svg>
        </button>

        <!-- Mic Button (Turns to Send) -->
        <button id="sendButton" class="send-mic-btn" type="button" aria-label="Enviar">
          <!-- Default Mic Icon -->
          <svg viewBox="0 0 24 24" class="mic-icon">
            <path
              d="M11.999 14.942c2.001 0 3.531-1.53 3.531-3.531V4.35c0-2.001-1.53-3.531-3.531-3.531S8.469 2.35 8.469 4.35v7.061c0 2.001 1.53 3.531 3.53 3.531zm4.338-3.531H15.63c-.36 3.016-2.912 5.258-5.95 5.258-3.037 0-5.59-2.242-5.95-5.258H3.023c.382 4.14 3.652 7.425 7.794 7.828v2.76h2.365v-2.76c4.142-.403 7.412-3.688 7.794-7.828z">
            </path>
          </svg>
        </button>
      </div>

      <div class="status-line" style="display:none">
        <span id="statusText"></span>
        <div style="font-size: 9px; opacity: 0.5; margin-top:2px; display:none" id="userIdLabel"></div>
      </div>
    </footer>

    <!-- Drawer (Catalog / Cart Screen) -->
    <div class="drawer" id="drawer">
      <div class="drawer-panel" role="dialog" aria-modal="true" aria-label="Pantalla de Cat치logo">
        <header class="drawer-header">
          <div class="left-actions">
            <button class="drawer-close" id="drawerClose" type="button">Cancelar</button>
          </div>
          <div id="drawerTitle">Cat치logo</div>
          <div class="right-actions">
            <button class="cart-btn" id="drawerCartBtn" type="button" style="font-size:22px">游</button>
          </div>
        </header>

        <div class="drawer-body">
          <!-- Business Info (Only shown in catalog mode) -->
          <div id="businessInfo" style="display:none">
            <div class="biz-banner">
              <img
                src="/Users/nicolasllanos/.gemini/antigravity/brain/37c5e849-0633-4bfe-a81c-de474fe52834/burger_house_banner_1770054754913.png"
                alt="Burger House Banner">
            </div>
            <div class="biz-details">
              <h2>Burger House</h2>
              <p>Las mejores hamburguesas gourmet de la ciudad, elaboradas con ingredientes frescos y carne de primera
                calidad.</p>
              <p style="margin-top:8px"><span style="color:var(--wa-header)">游늸</span> Microcentro, Buenos Aires</p>
            </div>
          </div>

          <!-- Dynamic content -->
          <div id="drawerBody"></div>
        </div>

        <!-- Sticky Bottom Cart Button (Catalog Mode Only) -->
        <button id="floatingCartBtn" class="floating-cart-btn" type="button">
          Ver carrito (<span id="floatingCartCount">0</span>)
        </button>

        <!-- Cart Footer (Cart Mode Only) -->
        <div class="drawer-footer" id="drawerFooter" style="display:none;">
          <div class="summary-container">
            <div class="summary-row total">
              <span>Total estimado</span>
              <span id="cartTotalLabel">US$ 0.00</span>
            </div>
          </div>
          <button class="primary-btn" id="sendOrderBtn" type="button">Realizar pedido</button>
          <div class="disclaimer">Los precios pueden variar seg칰n el local.</div>
        </div>
      </div>
    </div>

  </div>

  <script src="js/chat_hamburgueseria.js"></script>
</body>

</html>